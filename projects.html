<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Projets de Knight Peterson Jean-Baptiste - Portfolio de projets en data science et statistiques" />
  <meta name="author" content="Knight Peterson Jean-Baptiste" />
  <title>Projets - Knight Peterson Jean-Baptiste</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="Navigation principale">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">KPJB</a>
      <ul class="nav-menu">
        <li><a href="index.html" class="nav-link">Accueil</a></li>
        <li><a href="about.html" class="nav-link">À propos</a></li>
        <li><a href="projects.html" class="nav-link active">Projets</a></li>
        <li><a href="contact.html" class="nav-link">Contact</a></li>
      </ul>
      <button class="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <header class="page-hero">
    <div class="page-hero-content">
      <h1 class="page-title">Mes Projets</h1>
      <p class="page-subtitle">Découvrez mes réalisations en data science, statistiques et développement</p>
    </div>
    <div class="page-hero-overlay"></div>
  </header>

  <!-- Modal de connexion admin -->
  <div id="adminModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeAdminModal()">&times;</button>
      <h2 class="modal-title">Accès administrateur</h2>
      <p class="modal-description">Entrez le mot de passe pour gérer les projets.</p>
      <form id="adminLoginForm" class="admin-form">
        <div class="form-group">
          <label for="admin-password" class="form-label">Mot de passe</label>
          <input 
            type="password" 
            id="admin-password" 
            class="form-input"
            placeholder="Entrez votre mot de passe"
            required
          />
        </div>
        <p id="passwordError" class="error-message" style="display: none;">Mot de passe incorrect</p>
        <button type="submit" class="btn btn-primary btn-full">Se connecter</button>
      </form>
    </div>
  </div>

  <!-- Modal de confirmation de suppression -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
      <h2 class="modal-title">Confirmer la suppression</h2>
      <p class="modal-description">Êtes-vous sûr de vouloir supprimer ce projet ? Cette action est irréversible.</p>
      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeDeleteModal()">Annuler</button>
        <button class="btn btn-danger" onclick="confirmDeleteProject()">Supprimer</button>
      </div>
    </div>
  </div>

  <main>
    <section class="admin-access-section">
      <div class="container">
        <button id="adminAccessBtn" class="btn btn-outline admin-btn" onclick="showAdminModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <span>Accès Admin</span>
        </button>
        <button id="adminLogoutBtn" class="btn btn-outline admin-btn" style="display: none;" onclick="logoutAdmin()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          <span>Déconnexion</span>
        </button>
      </div>
    </section>

    <!-- Section Ajouter un projet (caché par défaut) -->
    <section class="add-project-section" id="addProjectSection" style="display: none;">
      <div class="container">
        <div class="add-project-card">
          <h2 class="section-title">Ajouter un nouveau projet</h2>
          <form id="addProjectForm" class="project-form">
            <div class="form-row">
              <div class="form-group">
                <label for="project-title" class="form-label">
                  <span>Titre du projet</span>
                  <span class="required">*</span>
                </label>
                <input 
                  type="text" 
                  id="project-title" 
                  name="title" 
                  class="form-input form-input-text"
                  placeholder="Ex: Analyse de survie multi-omique"
                  required
                />
              </div>

              <div class="form-group">
                <label for="project-category" class="form-label">
                  <span>Catégorie</span>
                  <span class="required">*</span>
                </label>
                <select id="project-category" name="category" class="form-input form-select" required>
                  <option value="">Sélectionner une catégorie</option>
                  <option value="data-science">Data Science</option>
                  <option value="machine-learning">Machine Learning</option>
                  <option value="statistics">Statistiques</option>
                  <option value="web-development">Développement Web</option>
                  <option value="research">Recherche</option>
                  <option value="other">Autre</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="project-description" class="form-label">
                <span>Description</span>
                <span class="required">*</span>
              </label>
              <textarea 
                id="project-description" 
                name="description" 
                class="form-textarea"
                rows="4"
                placeholder="Décrivez votre projet, les technologies utilisées, les résultats obtenus..."
                required
              ></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="project-technologies" class="form-label">
                  <span>Technologies (séparées par des virgules)</span>
                </label>
                <input 
                  type="text" 
                  id="project-technologies" 
                  name="technologies" 
                  class="form-input form-input-text"
                  placeholder="Ex: Python, R, Scikit-learn, Pandas"
                />
              </div>

              <div class="form-group">
                <label for="project-date" class="form-label">
                  <span>Date du projet</span>
                </label>
                <input 
                  type="date" 
                  id="project-date" 
                  name="date" 
                  class="form-input form-input-text"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="project-link" class="form-label">
                <span>Lien (GitHub, démo, etc.)</span>
              </label>
              <input 
                type="url" 
                id="project-link" 
                name="link" 
                class="form-input form-input-text"
                placeholder="https://github.com/username/project"
              />
            </div>

            <div class="form-group">
              <label for="project-image" class="form-label">
                <span>Image du projet</span>
              </label>
              <div class="file-upload-wrapper">
                <input 
                  type="file" 
                  id="project-image" 
                  name="image" 
                  class="file-input"
                  accept="image/*"
                />
                <label for="project-image" class="file-label">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                    <path d="M17.5 12.5V15.8333C17.5 16.2754 17.3244 16.6993 17.0118 17.0118C16.6993 17.3244 16.2754 17.5 15.8333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V12.5M14.1667 8.33333L10 12.5M10 12.5L5.83333 8.33333M10 12.5V2.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span id="file-name">Choisir une image</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="project-files" class="form-label">
                <span>Fichiers du projet (PDF, ZIP, etc.)</span>
              </label>
              <div class="file-upload-wrapper">
                <input 
                  type="file" 
                  id="project-files" 
                  name="files" 
                  class="file-input"
                  multiple
                  accept=".pdf,.zip,.rar,.doc,.docx"
                />
                <label for="project-files" class="file-label">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                    <path d="M17.5 12.5V15.8333C17.5 16.2754 17.3244 16.6993 17.0118 17.0118C16.6993 17.3244 16.2754 17.5 15.8333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V12.5M14.1667 8.33333L10 12.5M10 12.5L5.83333 8.33333M10 12.5V2.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span id="files-name">Choisir des fichiers</span>
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary btn-submit-project">
                <span>Ajouter le projet</span>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                  <path d="M10 2.5V17.5M2.5 10H17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
              <button type="reset" class="btn btn-outline">Réinitialiser</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section class="projects-section">
      <div class="container">
        <div class="projects-header">
          <h2 class="section-title">Mes projets</h2>
        </div>

        <div class="projects-grid" id="projectsGrid">
          <div class="project-card" data-category="data-science" data-static="true" data-id="static-1">
            <div class="project-image">
              <img src="images/generated-image.png" alt="Multi-omic Survival Analysis" class="project-image-img" loading="lazy">
            </div>
            <div class="project-content">
              <div class="project-category">Data Science</div>
              <h3 class="project-title">Multi-omic Survival Analysis</h3>
              <p class="project-description">
                Analyse de survie sur données TCGA utilisant des techniques de machine learning 
                et d'analyse statistique. Développement de modèles prédictifs combinant données 
                génomiques, transcriptomiques et cliniques.
              </p>
              <div class="project-tech">
                <span class="tech-tag">R</span>
                <span class="tech-tag">Python</span>
                <span class="tech-tag">Survival Analysis</span>
                <span class="tech-tag">Machine Learning</span>
              </div>
              <div class="project-footer">
                <span class="project-date">2024</span>
                <div class="project-links">
                  <a href="https://github.com/Knight-Peterson-world/survival-analysis-tcga" class="github-btn" target="_blank" rel="noopener noreferrer" title="Voir sur GitHub">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span>Voir sur GitHub</span>
                  </a>
                  <button class="project-link delete-btn" title="Supprimer le projet" data-static="true" data-id="static-1" onclick="deleteProject('static-1', true)" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                      <line x1="10" y1="11" x2="10" y2="17"/>
                      <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="project-card" data-category="statistics" data-id="static-2" data-static="true">
            <div class="project-image">
              <img src="images/generated-image-2.png" alt="Modélisation statistique" class="project-image-img" loading="lazy">
            </div>
            <div class="project-content">
              <div class="project-category">Statistiques</div>
              <h3 class="project-title">Modélisation statistique</h3>
              <p class="project-description">
                Développement et comparaison de modèles statistiques incluant régression linéaire et logistique, 
                arbres de décision, forêts aléatoires et analyse de survie.
              </p>
              <div class="project-tech">
                <span class="tech-tag">R</span>
                <span class="tech-tag">Scikit-learn</span>
                <span class="tech-tag">Statistical Modeling</span>
              </div>
              <div class="project-footer">
                <span class="project-date">2024</span>
                <div class="project-links">
                  <a href="https://github.com/Knight-Peterson-world/Regression-Modelisation-Python" class="github-btn" target="_blank" rel="noopener noreferrer" title="Voir sur GitHub">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span>Voir sur GitHub</span>
                  </a>
                  <button class="project-link delete-btn" title="Supprimer le projet" data-static="true" data-id="static-2" onclick="deleteProject('static-2', true)" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                      <line x1="10" y1="11" x2="10" y2="17"/>
                      <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="no-projects" id="noProjects" style="display: none;">
          <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          <h3>Aucun projet trouvé</h3>
          <p>Ajoutez votre premier projet en utilisant le formulaire ci-dessus.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="footer-content">
        <p class="footer-text">&copy; 2025 Knight Peterson Jean-Baptiste. Tous droits réservés.</p>
        <div class="footer-links">
          <a href="index.html" class="footer-link">Accueil</a>
          <a href="about.html" class="footer-link">À propos</a>
          <a href="projects.html" class="footer-link">Projets</a>
          <a href="contact.html" class="footer-link">Contact</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const ADMIN_PASSWORD = 'kpjb2025';
    
    let isAdminLoggedIn = false;
    let projectToDelete = null;
    let isStaticProject = false;
    let deletedStaticProjects = JSON.parse(localStorage.getItem('deletedStaticProjects') || '[]');

    // Navigation mobile
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    
    if (navToggle) {
      navToggle.addEventListener('click', () => {
        const isExpanded = navToggle.getAttribute('aria-expanded') === 'true';
        navToggle.setAttribute('aria-expanded', !isExpanded);
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
      });
    }

    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        navToggle.classList.remove('active');
        navToggle.setAttribute('aria-expanded', 'false');
      });
    });

    // GESTION ADMIN
    function showAdminModal() {
      document.getElementById('adminModal').classList.add('active');
      document.getElementById('admin-password').focus();
    }

    function closeAdminModal() {
      document.getElementById('adminModal').classList.remove('active');
      document.getElementById('admin-password').value = '';
      document.getElementById('passwordError').style.display = 'none';
    }

    function loginAdmin() {
      const password = document.getElementById('admin-password').value;
      if (password === ADMIN_PASSWORD) {
        isAdminLoggedIn = true;
        closeAdminModal();
        updateAdminUI();
        return true;
      } else {
        document.getElementById('passwordError').style.display = 'block';
        return false;
      }
    }

    function logoutAdmin() {
      isAdminLoggedIn = false;
      updateAdminUI();
    }

    function updateAdminUI() {
      const addProjectSection = document.getElementById('addProjectSection');
      const adminAccessBtn = document.getElementById('adminAccessBtn');
      const adminLogoutBtn = document.getElementById('adminLogoutBtn');
      const deleteButtons = document.querySelectorAll('.delete-btn');

      if (isAdminLoggedIn) {
        addProjectSection.style.display = 'block';
        adminAccessBtn.style.display = 'none';
        adminLogoutBtn.style.display = 'flex';
        deleteButtons.forEach(btn => btn.style.display = 'flex');
      } else {
        addProjectSection.style.display = 'none';
        adminAccessBtn.style.display = 'flex';
        adminLogoutBtn.style.display = 'none';
        deleteButtons.forEach(btn => btn.style.display = 'none');
      }
    }

    const adminLoginForm = document.getElementById('adminLoginForm');
    if (adminLoginForm) {
      adminLoginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        loginAdmin();
      });
    }

    window.addEventListener('click', function(e) {
      const adminModal = document.getElementById('adminModal');
      const deleteModal = document.getElementById('deleteModal');
      if (e.target === adminModal) closeAdminModal();
      if (e.target === deleteModal) closeDeleteModal();
    });

    // GESTION SUPPRESSION
    function deleteProject(projectId, isStatic = false) {
      if (!isAdminLoggedIn) {
        showAdminModal();
        return;
      }
      projectToDelete = projectId;
      isStaticProject = isStatic;
      document.getElementById('deleteModal').classList.add('active');
    }

    function closeDeleteModal() {
      document.getElementById('deleteModal').classList.remove('active');
      projectToDelete = null;
      isStaticProject = false;
    }

    function confirmDeleteProject() {
      if (projectToDelete) {
        if (isStaticProject) {
          deletedStaticProjects.push(projectToDelete);
          localStorage.setItem('deletedStaticProjects', JSON.stringify(deletedStaticProjects));
          const card = document.querySelector(`.project-card[data-id="${projectToDelete}"]`);
          if (card) card.remove();
        } else {
          projects = projects.filter(p => p.id !== projectToDelete);
          saveProjects();
          const allCards = projectsGrid.querySelectorAll('.project-card');
          allCards.forEach(card => {
            const deleteBtn = card.querySelector('.delete-btn');
            if (deleteBtn && deleteBtn.dataset.id === projectToDelete) card.remove();
          });
        }
        closeDeleteModal();
        checkNoProjects();
      }
    }

    function checkNoProjects() {
      const noProjects = document.getElementById('noProjects');
      const visibleProjects = projectsGrid.querySelectorAll('.project-card');
      noProjects.style.display = visibleProjects.length === 0 ? 'block' : 'none';
    }

    function hideDeletedStaticProjects() {
      deletedStaticProjects.forEach(id => {
        const card = document.querySelector(`.project-card[data-id="${id}"]`);
        if (card) card.remove();
      });
    }

    // Gestion fichiers uploadés
    const imageInput = document.getElementById('project-image');
    const filesInput = document.getElementById('project-files');
    const fileName = document.getElementById('file-name');
    const filesName = document.getElementById('files-name');

    if (imageInput) {
      imageInput.addEventListener('change', function() {
        fileName.textContent = this.files && this.files[0] ? this.files[0].name : 'Choisir une image';
      });
    }

    if (filesInput) {
      filesInput.addEventListener('change', function() {
        filesName.textContent = this.files && this.files.length > 0 
          ? `${this.files.length} fichier(s) sélectionné(s)` 
          : 'Choisir des fichiers';
      });
    }

    // GESTION PROJETS
    const projectsGrid = document.getElementById('projectsGrid');
    let projects = [];

    function loadProjects() {
      const savedProjects = localStorage.getItem('projects');
      if (savedProjects) {
        try {
          projects = JSON.parse(savedProjects);
        } catch(e) {
          projects = [];
        }
        renderDynamicProjects();
      }
    }

    function saveProjects() {
      localStorage.setItem('projects', JSON.stringify(projects));
    }

    function renderDynamicProjects() {
      // Supprimer uniquement les cartes dynamiques
      const dynamicCards = projectsGrid.querySelectorAll('.project-card:not([data-static])');
      dynamicCards.forEach(card => card.remove());

      // Ajouter les projets dynamiques
      projects.forEach(project => {
        const projectCard = createProjectCard(project);
        projectsGrid.appendChild(projectCard);
        // Animer après insertion
        requestAnimationFrame(() => {
          requestAnimationFrame(() => projectCard.classList.add('fade-in'));
        });
      });

      checkNoProjects();
    }

    function createProjectCard(project) {
      const card = document.createElement('div');
      card.className = 'project-card';
      card.dataset.category = project.category;

      const imageHtml = project.imageUrl 
        ? `<img src="${project.imageUrl}" alt="${project.title}" class="project-image-img">`
        : `<div class="project-image-placeholder">
            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <polyline points="21 15 16 10 5 21"/>
            </svg>
          </div>`;

      const techTags = project.technologies 
        ? project.technologies.split(',').map(t => `<span class="tech-tag">${t.trim()}</span>`).join('')
        : '';

      const date = project.date ? new Date(project.date).getFullYear() : new Date().getFullYear();
      const deleteButtonDisplay = isAdminLoggedIn ? 'flex' : 'none';

      card.innerHTML = `
        <div class="project-image">${imageHtml}</div>
        <div class="project-content">
          <div class="project-category">${getCategoryName(project.category)}</div>
          <h3 class="project-title">${project.title}</h3>
          <p class="project-description">${project.description}</p>
          ${techTags ? `<div class="project-tech">${techTags}</div>` : ''}
          <div class="project-footer">
            <span class="project-date">${date}</span>
            <div class="project-links">
              ${project.link ? `<a href="${project.link}" class="github-btn" target="_blank" rel="noopener noreferrer" title="Voir sur GitHub">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                <span>Voir sur GitHub</span>
              </a>` : ''}
              <button class="project-link delete-btn" title="Supprimer le projet" data-id="${project.id}" onclick="deleteProject('${project.id}', false)" style="display: ${deleteButtonDisplay};">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"/>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                  <line x1="10" y1="11" x2="10" y2="17"/>
                  <line x1="14" y1="11" x2="14" y2="17"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      `;
      return card;
    }

    function getCategoryName(category) {
      const categories = {
        'data-science': 'Data Science',
        'machine-learning': 'Machine Learning',
        'statistics': 'Statistiques',
        'data-analyst': 'Data Analyst',
        'research': 'Recherche',
        'other': 'Autre'
      };
      return categories[category] || category;
    }

    // SOUMISSION DU FORMULAIRE - CORRIGÉ
    const addProjectForm = document.getElementById('addProjectForm');
    
    if (addProjectForm) {
      addProjectForm.addEventListener('submit', function(e) {
        e.preventDefault();
        e.stopPropagation();

        const titleInput = document.getElementById('project-title');
        const categoryInput = document.getElementById('project-category');
        const descriptionInput = document.getElementById('project-description');

        // Validation manuelle
        if (!titleInput.value.trim()) {
          titleInput.focus();
          return;
        }
        if (!categoryInput.value) {
          categoryInput.focus();
          return;
        }
        if (!descriptionInput.value.trim()) {
          descriptionInput.focus();
          return;
        }

        const project = {
          id: Date.now().toString(),
          title: titleInput.value.trim(),
          category: categoryInput.value,
          description: descriptionInput.value.trim(),
          technologies: document.getElementById('project-technologies').value,
          date: document.getElementById('project-date').value,
          link: document.getElementById('project-link').value.trim(),
        };

        const imageFile = document.getElementById('project-image').files[0];

        if (imageFile) {
          const reader = new FileReader();
          reader.onload = function(evt) {
            project.imageUrl = evt.target.result;
            addProject(project);
          };
          reader.readAsDataURL(imageFile);
        } else {
          addProject(project);
        }
      });
    }

    function addProject(project) {
      projects.push(project);
      saveProjects();
      renderDynamicProjects();
      
      // Reset formulaire
      addProjectForm.reset();
      if (fileName) fileName.textContent = 'Choisir une image';
      if (filesName) filesName.textContent = 'Choisir des fichiers';
      
      // Scroll vers le nouveau projet
      setTimeout(() => {
        const newCard = projectsGrid.lastElementChild;
        if (newCard) newCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }, 150);
    }

    // Initialisation
    hideDeletedStaticProjects();
    loadProjects();
    updateAdminUI();

    // Animation au scroll pour les cartes statiques
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    document.querySelectorAll('.project-card[data-static], .add-project-card').forEach(el => {
      observer.observe(el);
    });
  </script>
</body>
</html>
